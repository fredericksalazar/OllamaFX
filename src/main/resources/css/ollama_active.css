/* ollama-custom.css */

.root {
    -fx-font-family: 'System', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

/* --- Estilos para la Barra Lateral estilo macOS --- */
.sidebar {
    -fx-background-color: -color-bg-subtle;
    -fx-padding: 15px 10px;
    /* More top padding for traffic lights alignment */
    -fx-alignment: top-center;
    -fx-spacing: 4px;
    /* Tighter spacing for cohesive feel */
    -fx-border-width: 0 1px 0 0;
    -fx-border-color: -color-border-subtle;
}

/* --- SIDEBAR LIST VIEW (Finder Style) --- */
/* Target the ListView specifically within the Sidebar */
.sidebar .list-view {
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-padding: 10px;
    /* More padding like Finder */
    -fx-border-width: 0;
}

.sidebar .list-view .virtual-flow .clipped-container .sheet .cell {
    -fx-background-color: transparent;
    -fx-padding: 0;
}

.sidebar .list-cell {
    -fx-background-color: transparent;
    -fx-padding: 8px 20px;
    /* Compact but comfortable */
    -fx-text-fill: -color-fg-default;
    -fx-font-size: 13px;
    -fx-alignment: CENTER_LEFT;
    -fx-background-radius: 6px;
    -fx-border-width: 0;
}

.sidebar .list-cell:empty {
    -fx-background-color: transparent;
    -fx-mouse-transparent: true;
}

.sidebar .list-cell:hover {
    -fx-background-color: rgba(0, 0, 0, 0.04);
    /* Subtle hover */
}

/* FINDER STYLE SELECTION: Light Grey Background, Blue Text */
.sidebar .list-cell:selected {
    -fx-background-color: rgba(0, 0, 0, 0.05) !important;
    /* Visual Grey Selection */
    -fx-text-fill: #007AFF !important;
    /* Blue Text */
    -fx-font-weight: normal;
    /* WAS BOLD - NOW NORMAL */
}

/* Ensure Label inside inherits the Blue Text */
.sidebar .list-cell:selected .label {
    -fx-text-fill: #007AFF !important;
    -fx-font-weight: normal;
}

/* ... content omitted ... */

/* Sidebar Buttons (General) - No Bold */
.sidebar .button {
    -fx-font-weight: normal;
}

.sidebar .app-title {
    -fx-font-weight: normal;
}

.sidebar-section-label {
    -fx-font-weight: normal;
    /* Even headers should be normal/thin */
    -fx-opacity: 0.7;
}

/* --- CONTEXT MENU FIX --- */
/* Ensure context menus (popups) have readable text regardless of sidebar state */
.context-menu {
    -fx-background-color: -color-bg-default;
    /* Standard background */
}

.context-menu .menu-item .label {
    -fx-text-fill: -color-fg-default !important;
    /* Force Standard Text Color (Black/Dark) */
}

.context-menu .menu-item:focused {
    -fx-background-color: -color-accent-emphasis;
}

.context-menu .menu-item:focused .label {
    -fx-text-fill: white !important;
}


/* Hide Scrollbar tracks */
.sidebar .list-view .scroll-bar:vertical {
    -fx-background-color: transparent;
}

.sidebar .list-view .scroll-bar:vertical .track {
    -fx-background-color: transparent;
    -fx-border-width: 0;
}

.sidebar .list-view .scroll-bar:vertical .thumb {
    -fx-background-color: rgba(128, 128, 128, 0.3);
}

/* Fix MenuButton - Clean & Auto-hide */
.sidebar .list-cell .menu-button {
    -fx-background-color: transparent;
    -fx-padding: 0;
    -fx-opacity: 0;
    /* HIDDEN BY DEFAULT (Cleaner Look) */
    -fx-cursor: hand;
}

/* Show Menu on Hover or Selection */
.sidebar .list-cell:hover .menu-button,
.sidebar .list-cell:selected .menu-button {
    -fx-opacity: 1;
}

.sidebar .list-cell .menu-button .arrow-button {
    -fx-padding: 0;
}

.sidebar .list-cell .menu-button .arrow {
    -fx-padding: 0;
    -fx-shape: null;
    -fx-background-color: transparent;
    -fx-mark-visible: false;
    -fx-pref-width: 0;
    -fx-pref-height: 0;
}

/* Icon Colors */
.sidebar .list-cell .menu-button .icon {
    -fx-fill: -color-fg-subtle;
    /* Subtle grey icon by default */
}

.sidebar .list-cell:hover .menu-button .icon {
    -fx-fill: -color-fg-default;
    /* Darker on hover */
}

/* When selected, Icon matches Text (Blue) */
.sidebar .list-cell:selected .menu-button .icon {
    -fx-fill: #007AFF !important;
    -fx-stroke: #007AFF !important;
}


/* --- SIDEBAR BUTTONS (Navigation) --- */
/* --- SIDEBAR BUTTONS (Navigation) --- */
/* --- SIDEBAR BUTTONS (Navigation) --- */
/* Native AtlantaFX buttons are used now. No custom overrides for .button */

/* Separator styling */
.sidebar-separator .line {
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 1px 0 0 0;
}

/* Chat Area Background - Subtly darker than sidebar or different */
.chat-area {
    -fx-background-color: transparent;
    /* Let stackpane bg show */
}

/* Main Content Area (StackPane behind chat) */
.stack-pane-content {
    -fx-background-color: -color-bg-default;
}

/* Darker Sidebar/Chat differentiation */
.root.light .sidebar {
    -fx-background-color: #f2f2f7;
    /* iOS System Gray 6 */
}

.root.light .stack-pane-content {
    -fx-background-color: #f5f5f7;
    /* Light grey chat bg */
}

.root.dark .sidebar {
    -fx-background-color: #1c1c1e;
    /* iOS Dark System Gray 6 */
}

.root.dark .stack-pane-content {
    -fx-background-color: #1c1c1e;
    /* Pure black/dark chat */
}

.root.dark .sidebar .list-cell:selected {
    -fx-background-color: rgba(255, 255, 255, 0.1) !important;
}

/* Typography Enhancements */
.welcome-label {
    -fx-font-size: 54px;
    /* HUGE! */
    -fx-font-weight: 400;
    /* Bold */
    -fx-text-fill: -color-fg-default;
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.1), 2, 0, 0, 1);
    -fx-text-alignment: CENTER;
    -fx-wrap-text: true;
}

/* Suggestion Chips */
.suggestion-chip {
    -fx-background-color: -color-bg-subtle;
    -fx-text-fill: -color-fg-default;
    -fx-background-radius: 20px;
    -fx-padding: 8 16;
    -fx-font-size: 13px;
    -fx-cursor: hand;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 20px;
    -fx-border-width: 1px;
}

.suggestion-chip:hover {
    -fx-background-color: -color-neutral-muted;
}

/* --- CHAT PREMIUM INPUT CARD --- */

/* Contenedor Flotante Grande (Card) */
.input-card {
    -fx-background-color: #ffffff;
    /* Blanco puro para contraste */
    -fx-background-radius: 30px;
    /* Bordes muy redondeados */
    -fx-border-width: 0;
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.12), 15, 0, 0, 4);
    -fx-min-height: 120px;
    /* Altura minima considerable */
    -fx-alignment: TOP_LEFT;
}

/* Modo oscuro override (si aplica) */
.root.dark .input-card {
    -fx-background-color: #000000;
    /* Match chat background in dark mode */
}

/* --- CHAT PREMIUM INPUT CAPSULE --- */

/* Contenedor Flotante (Capsule) */
.input-capsule {
    -fx-background-color: -color-bg-default;
    -fx-background-radius: 200px;
    /* Pill shape */
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 200px;
    -fx-border-width: 1px;
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.1), 15, 0, 0, 4);
    /* Sombra suave */
    -fx-min-height: 50px;
    -fx-alignment: BOTTOM_CENTER;
}

/* Ajustes para modo oscuro (opcional, si el tema lo soporta nativamente) */
/* .root.dark .input-capsule { ... } */

/* Botón Mágico (Sparkle) */
.magic-button {
    -fx-background-color: transparent;
    -fx-text-fill: -color-accent-emphasis;
    /* Color primario vibrante */
    -fx-font-size: 16px;
    -fx-cursor: hand;
    -fx-background-radius: 50%;
    -fx-min-width: 36px;
    -fx-min-height: 36px;
    -fx-alignment: CENTER;
}

.magic-button:hover {
    -fx-background-color: -color-bg-subtle;
    -fx-scale-x: 1.1;
    -fx-scale-y: 1.1;
}

/* Botón de Enviar (Icono) */
.send-button-icon {
    -fx-background-color: -color-accent-emphasis;
    -fx-text-fill: white;
    -fx-background-radius: 50%;
    -fx-min-width: 36px;
    -fx-min-height: 36px;
    -fx-font-size: 14px;
    -fx-cursor: hand;
    -fx-alignment: CENTER;
    -fx-content-display: TEXT_ONLY;
}

.send-button-icon:hover {
    -fx-background-color: #005bb5;
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.2), 5, 0, 0, 2);
}

/* TextArea Transparente */
.transparent-area {
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-font-size: 16px;
    /* Texto grande como en Gemini */
    -fx-prompt-text-fill: #a0a0a0;
    -fx-padding: 0;
    /* Sin padding extra */
}

.transparent-area .content {
    -fx-background-color: transparent;
}

.transparent-area:focused {
    -fx-background-color: transparent;
    -fx-background-insets: 0;
}

/* --- CREATIVITY PANEL --- */
.creativity-panel {
    -fx-background-color: -color-bg-default;
    -fx-background-radius: 12px;
    -fx-border-radius: 12px;
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 1px;
    -fx-padding: 15px;
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.15), 20, 0, 0, 5);
    -fx-min-width: 300px;
}

.creativity-label {
    -fx-font-weight: normal;
    -fx-font-size: 13px;
    -fx-text-fill: -color-fg-default;
}

.creativity-value-label {
    -fx-font-family: "System";
    /* O la fuente que uses */
    -fx-font-weight: 400;
    -fx-text-fill: -color-accent-emphasis;
}

.creativity-numeric-subtle {
    -fx-font-size: 10px;
    -fx-text-fill: -color-fg-muted;
}

.creativity-mark-label {
    -fx-font-size: 10px;
    -fx-text-fill: -color-fg-subtle;
    -fx-font-weight: 400;
    -fx-text-transform: uppercase;
    -fx-letter-spacing: 1px;
}

/* --- MIGRATED CHAT BUBBLES (From gnome.css) --- */
.chat-bubble {
    -fx-background-radius: 18px;
    -fx-padding: 10px 15px;
    -fx-font-size: 14px;
    -fx-max-width: 600px;
    /* Fixed max width to prevent super wide bubbles */
    -fx-effect: null;
    /* Reset any shadow if necessary */
}

.chat-bubble-user {
    -fx-background-color: -color-accent-emphasis;
    /* Blue background */
    -fx-text-fill: white;
    /* Always white text on blue */
    -fx-background-radius: 18px 18px 0 18px;
}

.chat-bubble-assistant {
    -fx-background-color: -color-bg-subtle;
    -fx-text-fill: -color-fg-default;
    -fx-background-radius: 18px 18px 18px 0;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 18px 18px 18px 0;
}

/* --- MIGRATED ICONS (From gnome.css) --- */
.icon-region {
    -fx-background-color: -color-fg-muted;
    -fx-min-width: 18px;
    -fx-min-height: 18px;
    -fx-max-width: 18px;
    -fx-max-height: 18px;
    -fx-scale-shape: true;
}

.icon-download {
    -fx-shape: "M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z";
}

.icon-time {
    -fx-shape: "M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z";
}

.icon-cube {
    -fx-shape: "M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9zM12 4.15L6.04 7.5 12 10.85l5.96-3.35L12 4.15zM5 15.91l6 3.38v-6.71L5 9.21v6.7zM13 19.29l6-3.38v-6.7l-6 3.38v6.7z";
}

.icon-trash {
    -fx-shape: "M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z";
}

.icon-copy {
    -fx-shape: "M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z";
}

/* --- MIGRATED BADGES (From gnome.css) --- */
.badge-chip {
    -fx-background-color: #ddf4ff;
    -fx-background-radius: 12px;
    -fx-padding: 5px 14px;
    -fx-text-fill: #0969da;
    -fx-font-weight: normal;
    -fx-font-size: 13px;
    -fx-border-color: transparent;
    -fx-border-radius: 12px;
    -fx-border-width: 1px;
}

.badge-blue {
    -fx-background-color: #ddf4ff;
    -fx-text-fill: #0969da;
}

.badge-purple {
    -fx-background-color: #fbefff;
    -fx-text-fill: #8250df;
}

.badge-green {
    -fx-background-color: #dafbe1;
    -fx-text-fill: #1a7f37;
}

.badge-orange {
    -fx-background-color: #fff8c5;
    -fx-text-fill: #9a6700;
}

.input-container-wrapper {
    -fx-background-color: transparent;
}



/* --- NANO BANANA (LIGHT INTEGRATED) --- */
.status-bar-nano {
    -fx-background-color: transparent;
    /* Seamless with sidebar */
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 1px 0 0 0;
}

.status-dot-nano {
    -fx-fill: -color-border-subtle;
    /* Default off/loading */
}

.status-dot-running {
    -fx-fill: #34c759;
    /* iOS Green (Screenshot match) */
    -fx-effect: dropshadow(gaussian, rgba(52, 199, 89, 0.3), 8, 0, 0, 0);
}

.status-dot-stopped {
    -fx-fill: #8e8e93;
    /* IOS Grey (Inactive) or Red if error */
    /* Screenshot shows green when running. Assuming grey/neutral when off or red if error.
       Let's stick to neutral grey for "stopped" to be clean like macOS. */
}

.status-label-nano {
    -fx-font-family: system;
    -fx-font-size: 11px;
    -fx-text-fill: -color-fg-default;
    /* Dark text */
    -fx-font-weight: normal;
}

.status-latency-nano {
    -fx-font-family: "Monospaced";
    -fx-font-size: 10px;
    -fx-text-fill: rgba(255, 255, 255, 0.5);
}

/* Toggle Switch Nano (Red/Green) */
.toggle-switch-nano {
    -fx-background-color: #ff3b30, white;
    /* Red (Off) Track, White Knob */
    -fx-background-insets: 0, 2 18 2 2;
    /* Knob on Left (for Off state approx) - wait, width is 36. 
                                           Knob size ~16. 
                                           Insets: Top=2, Right=18, Bottom=2, Left=2. 
                                           Right inset 18 means 36-18 = 18px from right. 
                                           Knob width = 36 - 2 - 18 = 16. Correct. */
    -fx-background-radius: 20, 20;
    -fx-text-fill: transparent;
    -fx-padding: 0;
    /* Clear padding, use insets for graphic */
    -fx-cursor: hand;
    -fx-min-width: 36px;
    -fx-max-width: 36px;
    -fx-min-height: 20px;
    -fx-max-height: 20px;
}

.toggle-switch-nano:selected {
    -fx-background-color: #34c759, white;
    /* Green (On) Track, White Knob */
    -fx-background-insets: 0, 2 2 2 18;
    /* Knob on Right.
                                           Insets: Top=2, Right=2, Bottom=2, Left=18. */
}

.toggle-switch-nano:hover {
    -fx-opacity: 0.9;
}

/* --- FULL WIDTH COLOR OLLAMA STATUS BAR --- */
.status-bar-container {
    -fx-padding: 12px 15px;
    -fx-background-radius: 0;
}

/* Background Colors */
.status-bar-stopped {
    -fx-background-color: #d32f2f;
    /* Muted Red (Material Red 700) - "Dry Red" */
}

.status-bar-running {
    -fx-background-color: #388e3c;
    /* Muted Green (Material Green 700) - "Dry Green" */
}

.status-label-white {
    -fx-text-fill: white;
    -fx-font-weight: normal;
    -fx-font-size: 13px;
}

/* SWITCH BUTTON STYLING */
.status-switch-button {
    -fx-background-color: white;
    -fx-text-fill: -color-fg-default;
    -fx-background-radius: 15px;
    /* Pill shape */
    -fx-min-width: 50px;
    -fx-padding: 3px 10px;
    -fx-font-size: 11px;
    -fx-font-weight: normal;
    -fx-cursor: hand;
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.2), 3, 0, 0, 1);
}

.status-switch-button:selected {
    -fx-background-color: white;
    /* Keep white bg for the "knob" look if possible, or inverse */
    -fx-text-fill: #388e3c;
}


/* Make it look more like a switch? 
   Actually, standard ToggleButton with pills style is clean. 
   User asked for "boton switch" shape.
   Let's simulate a simpler toggle: White pill with text inside.
*/

/* --- REFINED OLLAMA STATUS BAR --- */
.status-bar-refined {
    -fx-padding: 10px 15px;
    -fx-background-color: rgba(0, 0, 0, 0.03);
    /* Subtle footer background */
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 1px 0 0 0;
}

.status-indicator-dot {
    -fx-min-width: 8px;
    -fx-min-height: 8px;
    -fx-max-width: 8px;
    -fx-max-height: 8px;
    -fx-background-radius: 5px;
}

/* Re-use active/inactive classes but with updated colors if needed */
.status-dot-active {
    -fx-background-color: #34c759;
    /* iOS Green */
    -fx-effect: dropshadow(gaussian, rgba(52, 199, 89, 0.4), 6, 0, 0, 0);
}

.status-dot-inactive {
    -fx-background-color: #ff3b30;
    /* iOS Red */
}

.status-title-small {
    -fx-font-size: 11px;
    -fx-font-weight: normal;
    -fx-text-fill: -color-fg-default;
}

.status-subtitle-small {
    -fx-font-size: 10px;
    -fx-text-fill: -color-fg-muted;
}

/* POWER BUTTON */
.icon-button-power {
    -fx-background-color: transparent;
    -fx-padding: 5px;
    -fx-cursor: hand;
    -fx-border-radius: 50%;
    -fx-background-radius: 50%;
}

.icon-button-power:hover {
    -fx-background-color: rgba(0, 0, 0, 0.05);
}

.icon-button-power:pressed {
    -fx-background-color: rgba(0, 0, 0, 0.1);
}

.power-icon-shape {
    -fx-fill: -color-fg-muted;
    /* Default Grey */
    -fx-min-width: 16px;
    -fx-min-height: 16px;
    -fx-scale-x: 0.9;
    -fx-scale-y: 0.9;
}

.icon-button-power:hover .power-icon-shape {
    -fx-fill: -color-fg-default;
}

/* --- MARKDOWN STYLES (RichTextFX) --- */
/* --- MARKDOWN STYLES (RichTextFX / BBCode) --- */
.markdown-area {
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-padding: 0 10;
}

.markdown-area .content {
    -fx-background-color: transparent;
}

/* Base Text */
.markdown-area text {
    -fx-fill: -color-fg-default;
    -fx-font-family: "System";
    -fx-font-size: 16px;
    /* Increased from 14px for better readability */
    -fx-font-smoothing-type: lcd;
    /* Better anti-aliasing */
}

/* Headers - Gemini Style (Larger, Bolder) */
/* Note: These classes depend on how BBCodeParser assigns styles to [h1] tags. 
   Usually it maps to .heading1 etc. or we rely on the specific implementation. 
   Assuming AtlantaFX BBCodeParser maps [h1] -> styleClass "h1" or similar?
   Wait, looking at MarkdownOutput, it uses BBCodeParser.createLayout.
   If specific classes aren't generated, we might be styling blindly if we rely solely on these names.
   However, as
/* --- Right Sidebar (Inspector Panel) --- */
.chat-sidebar-right {
    -fx-background-color: -color-bg-subtle;
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 0 0 0 1px;
    /* Border Left only */
    -fx-effect: null;
}

.input-card {
    -fx-background-color: -color-bg-default;
    -fx-background-radius: 20px;
    /* More rounded */
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 20px;
    -fx-border-width: 1px;

    /* Premium "Float" Shadow */
    -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.08), 20, 0.0, 0, 5);
}

.sidebar-card {
    -fx-background-color: -color-bg-default;
    -fx-background-radius: 8px;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 8px;
    -fx-border-width: 1px;
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.02), 2, 0, 0, 1);
}

.sidebar-text-area {
    -fx-background-color: -color-bg-default;
    -fx-text-fill: -color-fg-default;
    -fx-prompt-text-fill: -color-fg-muted;
    -fx-background-radius: 8px;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 8px;
    -fx-border-width: 1px;
    -fx-padding: 8px;
    -fx-font-size: 13px;
    -fx-font-family: "System";
    -fx-highlight-fill: -color-accent-emphasis;
    -fx-highlight-text-fill: white;
}

.sidebar-text-area:focused {
    -fx-background-color: -color-bg-default;
    -fx-border-color: -color-accent-emphasis;
    -fx-effect: dropshadow(gaussian, rgba(0, 122, 255, 0.2), 5, 0, 0, 0);
}

.sidebar-text-area .content {
    -fx-background-color: transparent;
}

t beef them up. */

/* Headers - Gemini Style (Larger, Bolder) */
/* Aliasing widely used classes for headers */
.markdown-h1,
.h1,
.header-1,
.title-1 {
    -fx-font-size: 32px;
    /* Massive, bold */
    -fx-font-weight: 400;
    /* Extra Bold */
    -fx-fill: -color-fg-default;
    -fx-padding: 20px 0 10px 0;
    -fx-font-smoothing-type: lcd;
}

.markdown-h2,
.h2,
.header-2,
.title-2 {
    -fx-font-size: 24px;
    -fx-font-weight: normal;
    -fx-fill: -color-fg-default;
    -fx-padding: 15px 0 8px 0;
    -fx-font-smoothing-type: lcd;
}

.markdown-h3,
.h3,
.header-3,
.title-3 {
    -fx-font-size: 20px;
    -fx-font-weight: normal;
    -fx-fill: -color-fg-default;
    -fx-padding: 10px 0 5px 0;
    -fx-font-smoothing-type: lcd;
}

.markdown-h4 {
    -fx-font-size: 18px;
    -fx-font-weight: normal;
    -fx-fill: -color-fg-default;
}

.markdown-h5,
.markdown-h6 {
    -fx-font-size: 16px;
    -fx-font-weight: normal;
    -fx-fill: -color-fg-subtle;
}

/* Emphasis */
.markdown-bold {
    -fx-font-weight: normal;
}

.markdown-italic {
    -fx-font-style: italic;
}

/* Code Blocks */
/* Code Blocks (Paragraph Level) */
.markdown-code-paragraph {
    -fx-background-color: -color-bg-subtle;
    -fx-background-radius: 4px;
    -fx-border-width: 0;
}

.markdown-code-paragraph .text {
    -fx-font-family: "Monospaced";
    -fx-fill: -color-fg-default;
}

/* Inline Code (Span Level) */
/* Syntax Highlighting */
.keyword {
    -fx-fill: #cc7832;
    -fx-font-weight: normal;
}

.paren {
    -fx-fill: #a9b7c6;
}

.brace {
    -fx-fill: #a9b7c6;
}

.bracket {
    -fx-fill: #a9b7c6;
}

.semicolon {
    -fx-fill: #cc7832;
}

.string {

    /* --- APPLE DIALOG REDESIGN --- */
    .apple-dialog {
        -fx-background-color: #ffffff;
        /* Explicit White for Light Mode to float above grey */
        -fx-background-radius: 20px;
        -fx-border-radius: 20px;
        -fx-border-color: rgba(0, 0, 0, 0.1);
        /* Very subtle border */
        -fx-border-width: 1px;
        -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.25), 50, 0, 0, 15);
        /* Deep, soft shadow */
        -fx-padding: 30px;
        -fx-alignment: CENTER;
    }

    /* Support both .root.dark nesting and direct .dark class on the dialog root */
    .root.dark .apple-dialog,
    .apple-dialog.dark {
        -fx-background-color: #2c2c2e;
        /* Secondary System Fill (Lighter than background) */
        -fx-border-color: rgba(255, 255, 255, 0.15);
        /* More visible border */
        -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.8), 60, 0, 0, 20);
        /* Stronger shadow for separation */
    }

    .apple-dialog-title {
        -fx-font-size: 18px;
        -fx-font-weight: normal;
        -fx-text-fill: -color-fg-default;
        -fx-font-family: "System";
    }

    .apple-dialog-status-large {
        -fx-font-size: 32px;
        -fx-font-weight: 400;
        /* Extra bold */
        -fx-text-fill: -color-fg-default;
        -fx-font-family: "System";
    }

    .apple-dialog-status-subtle {
        -fx-font-size: 14px;
        -fx-text-fill: -color-fg-subtle;
        -fx-font-family: "System";
    }

    .apple-button-secondary {
        -fx-background-color: rgba(128, 128, 128, 0.15);
        /* Neutral grey pill */
        -fx-text-fill: -color-fg-default;
        -fx-background-radius: 20px;
        -fx-padding: 8px 24px;
        -fx-cursor: hand;
        -fx-font-size: 13px;
        -fx-font-weight: normal;
        -fx-border-width: 0;
    }

    .apple-button-secondary:hover {
        -fx-background-color: rgba(128, 128, 128, 0.25);
    }

    .apple-button-secondary:pressed {
        -fx-background-color: rgba(128, 128, 128, 0.35);
    }


    /* --- APPLE DESIGN REDESIGN (Premium Model Detail) --- */

    /* 1. Typography */
    .apple-title-large {
        -fx-font-family: "System";
        -fx-font-size: 38px;
        -fx-font-weight: 400;
        /* Extra Bold */
        -fx-text-fill: -color-fg-default;
        -fx-letter-spacing: -0.5px;
        /* Tight tracking like Apple */
    }

    .apple-text-body {
        -fx-font-family: "System";
        -fx-font-size: 15px;
        -fx-text-fill: -color-fg-default;
        -fx-line-spacing: 4px;
        -fx-opacity: 0.9;
    }

    .apple-text-subtle {
        -fx-font-size: 13px;
        -fx-text-fill: -color-fg-muted;
        -fx-font-weight: normal;
    }

    /* 2. Cards (Inset Grouped Style) */
    .apple-card-row {
        -fx-background-color: -color-bg-default;
        /* White on light, Dark on dark */
        -fx-background-radius: 12px;
        -fx-border-radius: 12px;
        -fx-border-color: rgba(0, 0, 0, 0.06);
        /* Very subtle border */
        -fx-border-width: 1px;
        -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.04), 10, 0, 0, 2);
        /* Soft ambient shadow */
        -fx-padding: 18px 20px;
        -fx-cursor: hand;
        -fx-alignment: CENTER_LEFT;
    }

    /* Hover Effect for Card */
    .apple-card-row:hover {
        -fx-background-color: -color-bg-subtle;
        /* Slightly darker/lighter depending on theme */
        -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.08), 15, 0, 0, 4);
        /* Lift up */
        -fx-translate-y: -1px;
        /* Micro-interaction */
    }

    /* Dark Mode Adjustments */
    .root.dark .apple-card-row {
        -fx-background-color: #1c1c1e;
        /* Secondary System Fill */
        -fx-border-color: rgba(255, 255, 255, 0.1);
        -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.3), 10, 0, 0, 2);
    }

    .root.dark .apple-card-row:hover {
        -fx-background-color: #2c2c2e;
        /* Tertiary System Fill */
    }


    /* 3. Action Button (Get / Open) */
    .apple-button-action {
        -fx-background-color: #007AFF;
        /* System Blue */
        -fx-text-fill: white;
        -fx-background-radius: 20px;
        /* Pill shape */
        -fx-font-weight: normal;
        -fx-font-size: 13px;
        -fx-padding: 6px 20px;
        -fx-cursor: hand;
        -fx-min-width: 70px;
        -fx-alignment: CENTER;
    }

    .apple-button-action:hover {
        -fx-background-color: #0062cc;
        /* Darker Blue */
        -fx-effect: dropshadow(gaussian, rgba(0, 122, 255, 0.4), 8, 0, 0, 2);
    }

    .apple-button-destructive {
        -fx-background-color: transparent;
        -fx-text-fill: #ff3b30;
        /* System Red */
        -fx-background-radius: 20px;
        -fx-border-color: rgba(255, 59, 48, 0.3);
        -fx-border-radius: 20px;
        -fx-padding: 5px 15px;
        -fx-cursor: hand;
        -fx-font-size: 13px;
        -fx-font-weight: normal;
    }

    .apple-button-destructive:hover {
        -fx-background-color: rgba(255, 59, 48, 0.1);
        -fx-border-color: #ff3b30;
    }

    /* 4. Badges (Refined) */
    .apple-badge-pill {
        -fx-background-radius: 6px;
        -fx-padding: 4px 10px;
        -fx-font-size: 12px;
        -fx-font-weight: normal;
        -fx-font-family: "Monospaced";
        /* For tech specs */
    }

    .apple-stat-box {
        -fx-alignment: CENTER_LEFT;
        -fx-spacing: 5px;
    }

    .apple-stat-icon {
        -fx-fill: -color-fg-muted;
        -fx-min-width: 14px;
        -fx-min-height: 14px;
    }

    /* 5. Separators */
    .apple-separator {
        -fx-background-color: -color-border-subtle;
        -fx-min-height: 1px;
        -fx-max-height: 1px;
        -fx-opacity: 0.5;
    }

    -fx-fill: #808080;
    -fx-font-style: italic;
}

.number {
    -fx-fill: #6897bb;
}

.chat-sidebar-right .sidebar-section-label {
    -fx-font-size: 11px;
    -fx-font-weight: 700;
    -fx-text-fill: -color-fg-muted;
    -fx-padding: 0 0 5 0;
    -fx-alignment: center-left;
    -fx-opacity: 0.8;
}

.chat-sidebar-right .sidebar-card {
    -fx-background-color: -color-bg-subtle;
    -fx-background-radius: 10px;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 10px;
    -fx-border-width: 1px;
    -fx-effect: none;
    /* Cleaner look */
}

.chat-sidebar-right .sidebar-text-area {
    -fx-background-color: -color-bg-subtle;
    -fx-background-radius: 10px;
    -fx-border-color: -color-border-default;
    -fx-border-radius: 10px;
    -fx-text-fill: -color-fg-default;
    -fx-prompt-text-fill: -color-fg-muted;
    -fx-font-family: "System";
    /* Native feel */
}

/* Floating Action Button - Glass/Utility Style */
.floating-settings-button {
    -fx-background-color: -color-bg-default;
    /* Match theme background */
    -fx-text-fill: -color-fg-default;
    -fx-background-radius: 50%;
    -fx-min-width: 48px;
    -fx-min-height: 48px;
    -fx-max-width: 48px;
    -fx-max-height: 48px;
    -fx-font-size: 24px;
    -fx-padding: 0;

    /* Subtle border for definition */
    -fx-border-color: -color-border-default;
    -fx-border-radius: 50%;
    -fx-border-width: 1px;

    /* Soft, diffuse shadow */
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.1), 10, 0, 0, 4);

    -fx-cursor: hand;
    -fx-alignment: center;
}

.floating-settings-button:hover {
    -fx-background-color: -color-bg-subtle;
    -fx-scale-x: 1.05;
    -fx-scale-y: 1.05;
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.15), 12, 0, 0, 6);
}

.floating-settings-button:pressed {
    -fx-background-color: -color-bg-subtle;
    -fx-scale-x: 0.95;
    -fx-scale-y: 0.95;
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.05), 5, 0, 0, 2);
}

/* Code Block Card */
.code-block-card {
    -fx-background-color: -color-bg-subtle;
    -fx-background-radius: 8px;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 8px;
    -fx-border-width: 1px;
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.05), 5, 0, 0, 2);
}

.code-block-header {
    -fx-background-color: -color-bg-default;
    -fx-background-radius: 8px 8px 0 0;
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 0 0 1px 0;
    -fx-alignment: CENTER_LEFT;
}

.code-block-language {
    -fx-font-weight: normal;
    -fx-font-size: 11px;
    -fx-text-fill: -color-fg-muted;
}

.code-block-copy-btn {
    -fx-font-size: 10px;
    -fx-padding: 4px 8px;
    -fx-cursor: hand;
}

.code-block-content {
    -fx-font-family: "Monospaced";
    -fx-font-size: 13px;
    -fx-background-color: transparent;
    -fx-text-fill: -color-fg-default;
}

.code-block-content .content {
    -fx-background-color: transparent;
}

/* --- Chat Message Footer Actions --- */
.chat-copy-button {
    -fx-background-color: -color-bg-default;
    -fx-border-color: -color-border-subtle;
    -fx-border-width: 1px;
    -fx-border-radius: 8px;
    -fx-background-radius: 8px;
    -fx-min-width: 32px;
    -fx-min-height: 32px;
    -fx-padding: 6px;
    -fx-cursor: hand;
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.08), 4, 0, 0, 2);
    -fx-alignment: CENTER;
}

.chat-copy-button:hover {
    -fx-background-color: -color-bg-subtle;
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.12), 6, 0, 0, 3);
    -fx-scale-x: 1.05;
    -fx-scale-y: 1.05;
}

.chat-copy-button:pressed {
    -fx-effect: dropshadow(three-pass-box, rgba(0, 0, 0, 0.05), 2, 0, 0, 1);
    -fx-scale-x: 0.95;
    -fx-scale-y: 0.95;
}

/* --- System Prompt Text Area --- */
.capsule-text-area {
    -fx-background-color: -color-bg-subtle;
    -fx-text-fill: -color-fg-default;
    -fx-prompt-text-fill: -color-fg-muted;
    -fx-background-radius: 8px;
    -fx-border-color: -color-border-subtle;
    -fx-border-radius: 8px;
    -fx-border-width: 1px;
    -fx-padding: 8px;
    -fx-font-size: 13px;
    -fx-font-family: "System";
}

.capsule-text-area:focused {
    -fx-background-color: -color-bg-default;
    -fx-border-color: -color-accent-emphasis;
    -fx-effect: dropshadow(gaussian, rgba(0, 122, 255, 0.2), 5, 0, 0, 0);
}

.capsule-text-area .content {
    -fx-background-color: transparent;
}