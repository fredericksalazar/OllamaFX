<?xml version="1.0" encoding="UTF-8"?>

<!-- Filters redesign Phase 2 -->
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.org.ollamafx.controller.AvailableModelsController"
      spacing="0" style="-fx-background-color: -color-bg-default;">
    
    <!-- TOP TOOLBAR: Search + Filters (scrollable) -->
    <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="NEVER" styleClass="toolbar-scroll">
        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="model-toolbar">
            <fx:define>
                <javafx.scene.control.ToggleGroup fx:id="filterGroup" />
            </fx:define>
            
            <!-- Search Field -->
            <javafx.scene.control.TextField fx:id="searchField" promptText="%available.search" 
                prefWidth="420" styleClass="search-field" />
            
            <Region HBox.hgrow="ALWAYS" />
            
            <!-- Filters grouped in a segmented layout - Centered & Single Selection -->
            <HBox styleClass="segmented-button">
                <ToggleButton fx:id="filterRecommended" text="Recomendados" styleClass="left-pill" toggleGroup="$filterGroup">
                    <graphic>
                        <FontIcon iconLiteral="fth-check-circle" iconSize="14" styleClass="font-icon" />
                    </graphic>
                </ToggleButton>
                <ToggleButton fx:id="filterVision" text="Vision" styleClass="center-pill" toggleGroup="$filterGroup">
                    <graphic>
                        <FontIcon iconLiteral="fth-eye" iconSize="14" styleClass="font-icon" />
                    </graphic>
                </ToggleButton>
                <ToggleButton fx:id="filterTools" text="Tools" styleClass="center-pill" toggleGroup="$filterGroup">
                    <graphic>
                        <FontIcon iconLiteral="fth-tool" iconSize="14" styleClass="font-icon" />
                    </graphic>
                </ToggleButton>
                <ToggleButton fx:id="filterCode" text="Code" styleClass="right-pill" toggleGroup="$filterGroup">
                    <graphic>
                        <FontIcon iconLiteral="fth-code" iconSize="14" styleClass="font-icon" />
                    </graphic>
                </ToggleButton>
            </HBox>
            
            <Region HBox.hgrow="ALWAYS" />
            
            <!-- Sort Menu - Far Right -->
            <MenuButton text="%available.sort" styleClass="flat" mnemonicParsing="false">
                <items>
                    <MenuItem text="%available.sort.az" onAction="#sortByNameAsc" />
                    <MenuItem text="%available.sort.za" onAction="#sortByNameDesc" />
                </items>
            </MenuButton>
        </HBox>
    </ScrollPane>
    
    <!-- CONTENT: List + Detail Panel -->
    <HBox VBox.vgrow="ALWAYS">
        <!-- Left: Model List -->
        <VBox spacing="8" HBox.hgrow="NEVER" minWidth="280" prefWidth="320" style="-fx-padding: 12;">
            <Label fx:id="resultsLabel" text="Cargando..." styleClass="results-label" />
            <ListView fx:id="modelListView" VBox.vgrow="ALWAYS" styleClass="edge-to-edge" />
        </VBox>
        
        <!-- Right: Detail Panel -->
        <ScrollPane fx:id="detailScrollPane" HBox.hgrow="ALWAYS" fitToWidth="true" hbarPolicy="NEVER"
                    style="-fx-background-color: -color-bg-subtle; -fx-background: -color-bg-subtle; -fx-border-color: transparent;">
            <StackPane fx:id="detailViewContainer" style="-fx-background-color: -color-bg-subtle;" />
        </ScrollPane>
    </HBox>
</VBox>
